{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { Geolocation } from '@capacitor/geolocation';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"../../components/page-header/page-header.component\";\nexport let GeolocalizacionPage = /*#__PURE__*/(() => {\n  class GeolocalizacionPage {\n    constructor() {\n      this.map = {};\n    }\n\n    ngOnInit() {\n      this.initMap();\n    }\n\n    obtenerPosicion() {\n      return __awaiter(this, void 0, void 0, function* () {\n        const coordinates = yield Geolocation.getCurrentPosition();\n        return coordinates;\n      });\n    }\n\n    onClick() {\n      this.obtenerPosicion();\n    }\n\n    initMap() {\n      return __awaiter(this, void 0, void 0, function* () {\n        let coordenadas;\n        coordenadas = yield this.obtenerPosicion();\n        console.log(\"Posición acctual:\", coordenadas); // Obtenemos la latitud y la longitud\n\n        const posicion = {\n          lat: coordenadas.coords.latitude,\n          lng: coordenadas.coords.longitude\n        }; // Mostramos el mapa centrado en la posición almacenada\n\n        const map = new google.maps.Map(document.getElementById(\"map\"), {\n          zoom: 8,\n          center: posicion\n        }); // Mostramos el marcador en la misma posición\n\n        const marker = new google.maps.Marker({\n          position: posicion,\n          map: map\n        }); // Creamos el objeto geocoder para convertir coordenadas en direcciones y viceversa\n\n        const geocoder = new google.maps.Geocoder(); // Creamos el objeto infowindow para mostrar la dirección sobre el marcador del mapa\n\n        const infowindow = new google.maps.InfoWindow(); // Ejecutamos el método geocode\n        // Le pasamos la latitud y longitud, y una función de callback con el código que queremos que se ejecute una vez obtenida la dirección\n        // Se mostrará sobre el mapa\n\n        geocoder.geocode({\n          location: posicion\n        }, function (results, status) {\n          if (results[0]) {\n            infowindow.setContent(results[0].formatted_address);\n            infowindow.open(map, marker);\n          } else {\n            window.alert(\"No results found\");\n          }\n        }); // Le pasamos la dirección y la función de callback para que cree otro marcado y\n        // lo posicione en las coordenadas de esa dirección\n\n        geocoder.geocode({\n          address: \"Bilbao\"\n        }, function (results, status) {\n          if (results[0]) {\n            const marker2 = new google.maps.Marker({\n              position: results[0].geometry.location,\n              map: map\n            });\n            const infowindow2 = new google.maps.InfoWindow();\n            infowindow2.setContent(results[0].formatted_address);\n            infowindow2.open(map, marker2);\n          } else {\n            window.alert(\"No results found\");\n          }\n        });\n      });\n    }\n\n  }\n\n  GeolocalizacionPage.ɵfac = function GeolocalizacionPage_Factory(t) {\n    return new (t || GeolocalizacionPage)();\n  };\n\n  GeolocalizacionPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: GeolocalizacionPage,\n    selectors: [[\"app-geolocalizacion\"]],\n    decls: 5,\n    vars: 0,\n    consts: [[\"titulo\", \"Geolocalizaci\\u00F3n\"], [\"expand\", \"block\", \"fill\", \"clear\", \"shape\", \"round\", 3, \"click\"], [\"id\", \"map\"]],\n    template: function GeolocalizacionPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-page-header\", 0);\n        i0.ɵɵelementStart(1, \"ion-content\")(2, \"ion-button\", 1);\n        i0.ɵɵlistener(\"click\", function GeolocalizacionPage_Template_ion_button_click_2_listener() {\n          return ctx.onClick();\n        });\n        i0.ɵɵtext(3, \" Click me \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(4, \"div\", 2);\n        i0.ɵɵelementEnd();\n      }\n    },\n    dependencies: [i1.IonButton, i1.IonContent, i2.PageHeaderComponent],\n    styles: [\"#map[_ngcontent-%COMP%]{height:100%}\"]\n  });\n  return GeolocalizacionPage;\n})();","map":null,"metadata":{},"sourceType":"module"}